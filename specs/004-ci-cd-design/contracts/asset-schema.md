# Design Asset Schema and Requirements

**Feature**: 004-ci-cd-design
**Date**: 2025-11-02
**Purpose**: Define exact specifications for design assets

## 1. Application Icon

### 1.1 Source Icon Requirements

| Property | Requirement | Validation |
|----------|------------|------------|
| **File Path** | `assets/icons/app-icon.png` | Must exist before build |
| **Format** | PNG with alpha channel | Verified by `file` command |
| **Dimensions** | Exactly 1024x1024 pixels | Verified by image metadata |
| **Color Space** | sRGB or Display P3 | sRGB recommended for compatibility |
| **Bit Depth** | 24-bit RGB + 8-bit alpha (32-bit total) | Standard PNG with transparency |
| **File Size** | <500KB recommended | For reasonable git repository size |

### 1.2 Apple Human Interface Guidelines Compliance

**Design Requirements** (FR-008):

```yaml
Shape:
  Type: Rounded square
  Corner Radius: Applied automatically by macOS (18% of icon size)
  Implementation: Design icon as square, macOS adds rounded corners

Content:
  Text: None (text not readable at small sizes)
  Detail Level: Simple, clear at 16x16 pixels
  Focus: Single visual metaphor (keyboard OR shortcuts, not both)
  Style: Flat design or minimal 3D
  Background: Solid color or simple gradient preferred

Visual Testing:
  Minimum Size: Must be recognizable at 16x16 pixels
  Maximum Size: Must look sharp at 1024x1024 pixels (Retina)
  Contrast: High contrast for visibility in both light and dark modes
  Uniqueness: Distinct from other macOS applications

Color Guidelines:
  Palette: Limited (2-4 colors maximum)
  Saturation: Medium to high for visual impact
  Background: Avoid pure white or pure black (use off-white/off-black)
  Consistency: Match application's overall visual identity
```

### 1.3 Generated Icon Variants

Generated by `tauri icon assets/icons/app-icon.png`:

| File | Size | Purpose | Location |
|------|------|---------|----------|
| `32x32.png` | 32x32 | Standard small icon | `src-tauri/icons/` |
| `128x128.png` | 128x128 | Standard medium icon | `src-tauri/icons/` |
| `128x128@2x.png` | 256x256 | Retina medium icon | `src-tauri/icons/` |
| `icon.icns` | Multi-size bundle | macOS icon bundle (all sizes) | `src-tauri/icons/` |
| `icon.ico` | Multi-size bundle | Windows icon (optional) | `src-tauri/icons/` |

**Note**: The `.icns` file contains all sizes from 16x16 to 1024x1024, including @2x Retina variants.

### 1.4 Integration with Tauri

**Configuration** (`src-tauri/tauri.conf.json`):

```json
{
  "bundle": {
    "identifier": "com.skhd.gui",
    "icon": [
      "icons/32x32.png",
      "icons/128x128.png",
      "icons/128x128@2x.png",
      "icons/icon.icns",
      "icons/icon.ico"
    ]
  }
}
```

**Validation**:
- All paths relative to `src-tauri/` directory
- All referenced files must exist after running `tauri icon`
- `.icns` file is primary for macOS builds

### 1.5 Icon Design Checklist

Before implementation, the icon must satisfy:

- [ ] Exactly 1024x1024 pixels (verified with image metadata)
- [ ] PNG format with transparency
- [ ] Clear and recognizable at 16x16 pixels
- [ ] Follows rounded square shape guideline
- [ ] No text or fine details
- [ ] Single visual metaphor (keyboard shortcuts theme)
- [ ] High contrast colors
- [ ] Looks professional in both light and dark macOS themes
- [ ] Distinct from existing macOS applications
- [ ] File size <500KB

---

## 2. DMG Background Image

### 2.1 Background Image Requirements

| Property | Requirement | Validation |
|----------|------------|------------|
| **File Path** | `assets/dmg/background.png` | Must exist if DMG background enabled |
| **Format** | PNG, JPG, or GIF | PNG recommended for quality |
| **Dimensions** | Matches DMG window size | Default: 660x400 pixels |
| **Retina Variant** | `background@2x.png` (1320x800) | Optional but recommended |
| **File Size** | <2MB | Impacts total DMG size |
| **Color Space** | sRGB | For consistent rendering |

### 2.2 DMG Layout Configuration

**Configuration** (`src-tauri/tauri.conf.json`):

```json
{
  "bundle": {
    "macOS": {
      "dmg": {
        "background": "../../assets/dmg/background.png",
        "windowSize": {
          "width": 660,
          "height": 400
        },
        "windowPosition": {
          "x": 400,
          "y": 400
        },
        "appPosition": {
          "x": 180,
          "y": 170
        },
        "applicationFolderPosition": {
          "x": 480,
          "y": 170
        }
      }
    }
  }
}
```

**Path Note**: Background path is relative to `src-tauri/` directory.

### 2.3 DMG Background Design Guidelines

**Visual Design**:
```yaml
Style: Minimal, professional
Colors: macOS-native palette (grays, subtle gradients)
Branding: Optional product name or logo (subtle, non-intrusive)
Layout Guide: Visual indicators for drag-to-Applications action
Compatibility: Works in both light and dark macOS themes

Content to Avoid:
  - Busy patterns or textures
  - Bright, distracting colors
  - Text instructions (use visual cues instead)
  - Company marketing materials
```

**Standard Layout**:
```text
┌─────────────────────────────────────────┐
│                                         │
│     [App Icon]              [Apps]      │
│        ↓                      ↑          │
│        └──────────────────────┘          │
│                                         │
│  Drag application to Applications      │
│  folder to install                      │
│                                         │
└─────────────────────────────────────────┘
    660px wide x 400px high
```

**Icon Positions** (from config):
- App icon: (180, 170) - left side
- Applications folder shortcut: (480, 170) - right side
- Visual flow: Left to right (drag action)

**Note**: Icon position settings may not work on CI/CD platforms (known Tauri limitation). Background image and window size are reliable.

### 2.4 DMG Background Design Checklist

Before implementation, the DMG background must satisfy:

- [ ] Dimensions match windowSize (660x400 or custom)
- [ ] Retina @2x variant provided (1320x800)
- [ ] File size <2MB (PNG recommended)
- [ ] Professional, minimal design
- [ ] Works in both light and dark macOS themes
- [ ] No distracting patterns or bright colors
- [ ] Optional: Subtle branding or product name
- [ ] Visual cues indicate drag-to-Applications action

---

## 3. Asset Creation Workflow

### 3.1 Icon Creation Process

```text
Step 1: Design Source Icon
  Tool: Figma, Sketch, AI generation (DALL-E, Midjourney)
  Output: 1024x1024 PNG with transparency
  Location: assets/icons/app-icon.png

Step 2: Validate Source Icon
  Check: Dimensions, format, transparency, clarity at small sizes
  Tools: Preview.app (macOS), image metadata

Step 3: Generate Icon Variants
  Command: bun tauri icon assets/icons/app-icon.png
  Output: src-tauri/icons/*.png, icon.icns
  Validation: Verify all files created

Step 4: Configure Tauri
  File: src-tauri/tauri.conf.json
  Action: Update bundle.icon array with generated paths
  Validation: Relative paths correct

Step 5: Test Build
  Command: bun run tauri build --bundles dmg
  Validation: Icon appears in DMG, Dock, Finder, About dialog
```

### 3.2 DMG Background Creation Process

```text
Step 1: Design Background Image
  Tool: Figma, Sketch, Photoshop
  Output: 660x400 PNG (standard resolution)
  Output: 1320x800 PNG (Retina @2x)
  Location: assets/dmg/background.png, assets/dmg/background@2x.png

Step 2: Validate Background
  Check: Dimensions, file size, visual quality
  Test: View at both standard and Retina resolutions

Step 3: Configure Tauri
  File: src-tauri/tauri.conf.json
  Action: Update bundle.macOS.dmg.background path
  Action: Adjust windowSize if using custom dimensions
  Validation: Path relative to src-tauri/

Step 4: Test DMG
  Command: bun run tauri build --bundles dmg
  Validation: Open DMG, verify background appears
  Validation: Check icon positions, visual layout
```

### 3.3 Asset Version Control

**Git Tracking**:
```gitignore
# Track source assets
assets/icons/app-icon.png
assets/dmg/background.png
assets/dmg/background@2x.png

# Track generated icons (for convenience, optional)
src-tauri/icons/

# Do NOT track
*.sketch~
*.psd~
Thumbs.db
.DS_Store
```

**Recommendation**: Track both source and generated icons in git for consistency across development environments.

---

## 4. Validation Checklist

Before marking Feature 004 complete, verify:

### Icon Assets
- [ ] Source icon exists at `assets/icons/app-icon.png` (1024x1024 PNG)
- [ ] Generated icons exist in `src-tauri/icons/` directory
- [ ] `.icns` file generated and referenced in tauri.conf.json
- [ ] Icon appears correctly in macOS Dock when app runs
- [ ] Icon appears in Finder for application bundle
- [ ] Icon appears in About dialog (FR-012)
- [ ] Icon is clear at 16x16 pixels (minimum size)
- [ ] Icon follows Apple HIG (no text, simple design, rounded square)

### DMG Assets
- [ ] Background image exists at `assets/dmg/background.png` (if DMG background enabled)
- [ ] Retina variant exists at `assets/dmg/background@2x.png` (recommended)
- [ ] Background path configured in tauri.conf.json
- [ ] DMG window size matches background dimensions
- [ ] DMG opens with custom background (manual test)
- [ ] Icon positions visible (app icon + Applications folder)
- [ ] Professional appearance, not distracting

### Integration
- [ ] All asset paths in tauri.conf.json are correct
- [ ] Assets stored in version control (git)
- [ ] Build succeeds with all assets integrated
- [ ] DMG file size reasonable (<20MB per constitution)
- [ ] Universal binary works on both Intel and Apple Silicon

### Success Criteria
- [ ] SC-003: Icon displays correctly at all sizes without pixelation (FR-008)
- [ ] SC-004: Users can install from DMG without dev tools (FR-010)

---

## 5. Asset Maintenance

### Updating the Icon

```bash
# 1. Replace source file
cp new-icon.png assets/icons/app-icon.png

# 2. Regenerate variants
bun tauri icon assets/icons/app-icon.png

# 3. Test build
bun run tauri build --bundles dmg

# 4. Commit changes
git add assets/icons/app-icon.png src-tauri/icons/
git commit -m "Update application icon"
```

### Updating DMG Background

```bash
# 1. Replace background files
cp new-background.png assets/dmg/background.png
cp new-background@2x.png assets/dmg/background@2x.png

# 2. Update config if dimensions changed
# Edit src-tauri/tauri.conf.json > bundle > macOS > dmg > windowSize

# 3. Test DMG
bun run tauri build --bundles dmg

# 4. Commit changes
git add assets/dmg/ src-tauri/tauri.conf.json
git commit -m "Update DMG background"
```

---

## 6. References

- **Apple Human Interface Guidelines**: [developer.apple.com/design/human-interface-guidelines/macos](https://developer.apple.com/design/human-interface-guidelines/macos)
- **Tauri Icon Command**: [tauri.app/v1/guides/building/icons](https://tauri.app/v1/guides/building/icons)
- **Tauri macOS Bundling**: [tauri.app/v1/guides/building/macos](https://tauri.app/v1/guides/building/macos)
- **DMG Design Best Practices**: Apple Developer Documentation

---

**Summary**: This schema defines all design asset requirements, specifications, and validation criteria for Feature 004. All assets must satisfy these requirements before the feature is considered complete.
